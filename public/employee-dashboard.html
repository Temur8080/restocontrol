<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mening Sahifam:Hodim Dashboard:restocontrol.uz</title>
    <link rel="icon" type="image/png" sizes="32x32" href="logo-1.png">
    <link rel="icon" type="image/png" sizes="96x96" href="logo-1.png">
    <link rel="icon" type="image/png" sizes="192x192" href="logo-1.png">
    <link rel="shortcut icon" type="image/png" href="logo-1.png">
    <link rel="apple-touch-icon" sizes="180x180" href="logo-1.png">
    <link rel="stylesheet" href="admin-styles.css">
    <link rel="stylesheet" href="mobile.css">
    <script src="libs/chart.umd.min.js"></script>
    <script src="mobile.js"></script>
</head>
<body>
    <!-- Mobile Menu Toggle Button -->
    <button class="mobile-menu-toggle" id="mobileMenuToggle" aria-label="Menu">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="3" y1="12" x2="21" y2="12"></line>
            <line x1="3" y1="6" x2="21" y2="6"></line>
            <line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
    </button>

    <!-- Sidebar Overlay for Mobile -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <div class="admin-container">
        <main>
            <!-- Sidebar Menu -->
            <aside class="admin-sidebar employee-sidebar" id="employeeSidebar">
                <div class="sidebar-header">
                    <img id="sidebarLogo" src="" alt="Logo" style="display: none;">
                    <h1 id="sidebarTitle">Mening Sahifam</h1>
                </div>
                <nav class="sidebar-nav">
                    <ul class="sidebar-menu" id="employeeMenu">
                        <li class="sidebar-menu-item">
                            <a href="#" class="sidebar-menu-link active" data-section="overview">
                                <span class="sidebar-menu-icon">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M3 3v18h18M7 16l4-8 4 8M7 12h10"></path>
                                    </svg>
                                </span>
                                <span>Statistika</span>
                            </a>
                        </li>
                        <li class="sidebar-menu-item">
                            <a href="#" class="sidebar-menu-link" data-section="salaries">
                                <span class="sidebar-menu-icon">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                                    </svg>
                                </span>
                                <span>Maoshlar</span>
                            </a>
                        </li>
                        <li class="sidebar-menu-item">
                            <a href="#" class="sidebar-menu-link" data-section="personal">
                                <span class="sidebar-menu-icon">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                        <circle cx="12" cy="7" r="4"></circle>
                                    </svg>
                                </span>
                                <span>Profil</span>
                            </a>
                        </li>
                    </ul>
                </nav>
                <div class="sidebar-footer">
                    <button class="logout-btn" id="logoutBtn">
                        <svg class="logout-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                            <polyline points="16 17 21 12 16 7"></polyline>
                            <line x1="21" y1="12" x2="9" y2="12"></line>
                        </svg>
                        Chiqish
                    </button>
                </div>
            </aside>

            <!-- Main Content -->
            <div class="admin-content-wrapper">
                <div class="admin-content">
                    <!-- Statistics Section -->
                    <div id="overviewSection" class="content-section">
                        <div class="add-admin-card">
                            <div class="card-header">
                                <h2>Statistika</h2>
                                <button class="refresh-btn" id="refreshOverviewBtn" title="Yangilash">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M1 4v6h6M23 20v-6h-6"></path>
                                        <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"></path>
                                    </svg>
                                </button>
                            </div>
                            
                            <div id="employeeInfoHeader" style="margin-bottom: 20px; padding-bottom: 16px; border-bottom: 1px solid #e5e7eb;">
                                <div id="employeeName" style="font-size: 16px; font-weight: 600; color: #111827; margin-bottom: 4px;">Yuklanmoqda...</div>
                                <div id="employeePosition" style="font-size: 13px; color: #6b7280;">â€”</div>
                            </div>

                            <!-- Statistics Cards -->
                            <div id="statsGrid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px; margin-bottom: 24px;">
                                <!-- Stats will be loaded here -->
                            </div>

                            <!-- Charts Grid -->
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 16px; margin-bottom: 24px;">
                                <!-- Attendance Chart -->
                                <div style="background: white; border: 1px solid #e5e7eb; border-radius: 8px; padding: 16px;">
                                    <h3 style="font-size: 14px; font-weight: 600; color: #111827; margin-bottom: 12px;">Davomat (30 kun)</h3>
                                    <canvas id="attendanceChart" style="max-height: 250px;"></canvas>
                                </div>

                                <!-- Work Hours Chart -->
                                <div style="background: white; border: 1px solid #e5e7eb; border-radius: 8px; padding: 16px;">
                                    <h3 style="font-size: 14px; font-weight: 600; color: #111827; margin-bottom: 12px;">Ish Vaqti (Haftalik)</h3>
                                    <canvas id="workHoursChart" style="max-height: 250px;"></canvas>
                                </div>
                            </div>

                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 16px; margin-bottom: 24px;">
                                <!-- Salary Trend Chart -->
                                <div style="background: white; border: 1px solid #e5e7eb; border-radius: 8px; padding: 16px;">
                                    <h3 style="font-size: 14px; font-weight: 600; color: #111827; margin-bottom: 12px;">Maosh Tendentsiyasi</h3>
                                    <canvas id="salaryTrendChart" style="max-height: 250px;"></canvas>
                                </div>

                                <!-- Bonus vs Penalty Chart -->
                                <div style="background: white; border: 1px solid #e5e7eb; border-radius: 8px; padding: 16px;">
                                    <h3 style="font-size: 14px; font-weight: 600; color: #111827; margin-bottom: 12px;">Bonuslar va Jarimalar</h3>
                                    <canvas id="bonusPenaltyChart" style="max-height: 250px;"></canvas>
                                </div>
                            </div>

                            <!-- Work Schedule -->
                            <div style="margin-bottom: 24px;">
                                <h3 style="font-size: 14px; font-weight: 600; color: #111827; margin-bottom: 12px;">Ish Jadvali</h3>
                                <div id="workScheduleCompact" style="display: grid; gap: 8px;">
                                    <!-- Work schedule will be loaded here -->
                                </div>
                            </div>

                            <!-- Recent Attendance -->
                            <div>
                                <h3 style="font-size: 14px; font-weight: 600; color: #111827; margin-bottom: 12px;">Oxirgi Davomat</h3>
                                <div id="attendanceList" style="display: flex; flex-direction: column; gap: 8px;">
                                    <!-- Attendance will be loaded here -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Salaries Section -->
                    <div id="salariesSection" class="content-section" style="display: none;">
                        <div class="add-admin-card">
                            <div class="card-header">
                                <h2>Maoshlar</h2>
                                <button class="refresh-btn" id="refreshSalariesBtn" title="Yangilash">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M1 4v6h6M23 20v-6h-6"></path>
                                        <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"></path>
                                    </svg>
                                </button>
                            </div>

                            <div id="salariesList" style="display: flex; flex-direction: column; gap: 12px; margin-bottom: 24px;">
                                <!-- Salaries will be loaded here -->
                            </div>

                            <!-- Bonuses -->
                            <div style="border-top: 1px solid #e5e7eb; padding-top: 20px; margin-bottom: 24px;">
                                <h3 style="font-size: 14px; font-weight: 600; color: #111827; margin-bottom: 12px;">Bonuslar</h3>
                                <div id="bonusesList" style="display: flex; flex-direction: column; gap: 8px;">
                                    <!-- Bonuses will be loaded here -->
                                </div>
                            </div>

                            <!-- Penalties -->
                            <div style="border-top: 1px solid #e5e7eb; padding-top: 20px;">
                                <h3 style="font-size: 14px; font-weight: 600; color: #111827; margin-bottom: 12px;">Jarimalar</h3>
                                <div id="penaltiesList" style="display: flex; flex-direction: column; gap: 8px;">
                                    <!-- Penalties will be loaded here -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Personal Information Section -->
                    <div id="personalSection" class="content-section" style="display: none;">
                        <div class="add-admin-card">
                            <div class="card-header">
                                <h2>Profil</h2>
                                <button class="refresh-btn" id="refreshPersonalBtn" title="Yangilash">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M1 4v6h6M23 20v-6h-6"></path>
                                        <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"></path>
                                    </svg>
                                </button>
                            </div>

                            <!-- Personal Info Cards -->
                            <div id="personalInfo" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 12px; margin-bottom: 24px;">
                                <!-- Personal info will be loaded here -->
                            </div>

                            <!-- Edit Form -->
                            <div style="border-top: 1px solid #e5e7eb; padding-top: 24px; margin-top: 24px;">
                                <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 20px;">
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="color: #6b7280;">
                                        <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                                        <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                                    </svg>
                                    <h3 style="font-size: 15px; font-weight: 600; color: #111827; margin: 0;">Ma'lumotlarni Tahrirlash</h3>
                                </div>
                                <form id="editForm" class="add-admin-form">
                                    <div class="form-row" style="grid-template-columns: 1fr 1fr;">
                                        <div class="form-group">
                                            <label for="editFullName">To'liq Ism</label>
                                            <input type="text" id="editFullName" name="full_name" placeholder="To'liq ism" required>
                                        </div>
                                        <div class="form-group">
                                            <label for="editPosition">Lavozim</label>
                                            <input type="text" id="editPosition" name="position" placeholder="Lavozim" required>
                                        </div>
                                    </div>
                                    <div class="form-row" style="grid-template-columns: 1fr 1fr;">
                                        <div class="form-group">
                                            <label for="editPhone">Telefon</label>
                                            <input type="text" id="editPhone" name="phone" placeholder="Telefon raqami">
                                        </div>
                                        <div class="form-group">
                                            <label for="editEmail">Email</label>
                                            <input type="email" id="editEmail" name="email" placeholder="Email manzil">
                                        </div>
                                    </div>
                                    <div id="editError" class="error-message" style="display: none;"></div>
                                    <div id="editSuccess" class="success-message" style="display: none;"></div>
                                    <button type="submit" class="add-btn" id="saveBtn" style="margin-top: 8px;">
                                        <span class="btn-text">Saqlash</span>
                                        <span class="btn-loader" id="saveLoader" style="display: none;"></span>
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="utils.js"></script>
    <script src="employee-dashboard-script.js"></script>
</body>
</html>
