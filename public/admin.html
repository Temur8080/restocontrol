<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Boshqaruvi::restocontrol.uz</title>
    <link rel="icon" type="image/png" sizes="32x32" href="logo-1.png">
    <link rel="icon" type="image/png" sizes="96x96" href="logo-1.png">
    <link rel="icon" type="image/png" sizes="192x192" href="logo-1.png">
    <link rel="shortcut icon" type="image/png" href="logo-1.png">
    <link rel="apple-touch-icon" sizes="180x180" href="logo-1.png">
    <link rel="stylesheet" href="admin-styles.css">
    <link rel="stylesheet" href="mobile.css">
    <script src="libs/chart.umd.min.js"></script>
    <script src="libs/xlsx.full.min.js"></script>
    <script src="mobile.js"></script>
</head>
<body>
    <!-- Mobile Menu Toggle Button -->
    <button class="mobile-menu-toggle" id="mobileMenuToggle" aria-label="Menu">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="3" y1="12" x2="21" y2="12"></line>
            <line x1="3" y1="6" x2="21" y2="6"></line>
            <line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
    </button>

    <!-- Sidebar Overlay for Mobile -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <div class="admin-container">
        <main>
            <!-- Sidebar Menu -->
            <aside class="admin-sidebar" id="adminSidebar">
                <div class="sidebar-header">
                    <img id="sidebarLogo" src="" alt="Logo" style="display: none;">
                    <h1 id="sidebarTitle">Admin Boshqaruvi</h1>
                </div>
                <nav class="sidebar-nav">
                    <ul class="sidebar-menu" id="sidebarMenu">
                        <!-- Menu items will be populated by JavaScript based on user role -->
                    </ul>
                </nav>
                <div class="sidebar-footer">
                    <button class="logout-btn" id="logoutBtn">
                        <svg class="logout-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                            <polyline points="16 17 21 12 16 7"></polyline>
                            <line x1="21" y1="12" x2="9" y2="12"></line>
                        </svg>
                        Chiqish
                    </button>
                </div>
            </aside>

            <!-- Main Content Area -->
            <div class="admin-content-wrapper">
                <div class="admin-content">
                <!-- Admins Section (for super_admin) -->
                <div id="adminsSection" style="display: none;">
                    <div class="admins-list-card">
                        <div class="card-header">
                            <h2>Adminlar Ro'yxati</h2>
                            <div style="display: flex; gap: 8px; align-items: center;">
                                <button class="refresh-btn" id="refreshBtn" title="Yangilash">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M1 4v6h6M23 20v-6h-6"></path>
                                        <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"></path>
                                    </svg>
                                </button>
                                <button class="add-icon-btn" id="openAddAdminModal" title="Yangi Admin Qo'shish">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <line x1="12" y1="5" x2="12" y2="19"></line>
                                        <line x1="5" y1="12" x2="19" y2="12"></line>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        
                        <div id="loadingMessage" class="loading-message" style="display: none;">
                            Yuklanmoqda...
                        </div>
                        
                        <div id="adminsList" class="admins-list">
                            <!-- Admins will be loaded here -->
                        </div>
                        
                        <div id="emptyMessage" class="empty-message" style="display: none;">
                            Hozircha adminlar yo'q
                        </div>
                    </div>
                </div>

                <!-- Add Admin Modal -->
                <div id="addAdminModal" class="modal-overlay" style="display: none;">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3>Yangi Admin Qo'shish</h3>
                            <button class="modal-close" id="closeAddAdminModal">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="18" y1="6" x2="6" y2="18"></line>
                                    <line x1="6" y1="6" x2="18" y2="18"></line>
                                </svg>
                            </button>
                        </div>
                        <form id="addAdminForm" class="add-admin-form">
                            <div class="form-group">
                                <label for="newUsername">Username</label>
                                <input 
                                    type="text" 
                                    id="newUsername" 
                                    name="username" 
                                    placeholder="Username kiriting"
                                    required
                                    autocomplete="off"
                                >
                            </div>
                            
                            <div class="form-group">
                                <label for="newPassword">Password</label>
                                <input 
                                    type="password" 
                                    id="newPassword" 
                                    name="password" 
                                    placeholder="Password kiriting"
                                    required
                                    autocomplete="new-password"
                                >
                            </div>
                            
                            <div id="addErrorMessage" class="error-message" style="display: none;"></div>
                            <div id="addSuccessMessage" class="success-message" style="display: none;"></div>
                            
                            <div style="display: flex; gap: 8px; justify-content: flex-end; margin-top: 16px;">
                                <button type="button" class="btn-cancel" id="cancelAddAdmin">Bekor qilish</button>
                                <button type="submit" class="add-btn" id="addBtn">
                                    <span class="btn-text">Qo'shish</span>
                                    <span class="btn-loader" id="addLoader" style="display: none;"></span>
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Subscription Modal -->
                <div id="subscriptionModal" class="modal-overlay" style="display: none;">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3>Obuna Sozlamalari</h3>
                            <button class="modal-close" id="closeSubscriptionModal">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="18" y1="6" x2="6" y2="18"></line>
                                    <line x1="6" y1="6" x2="18" y2="18"></line>
                                </svg>
                            </button>
                        </div>
                        <form id="subscriptionForm" class="add-admin-form">
                            <input type="hidden" id="subscriptionAdminId">
                            <div class="form-group">
                                <label for="subscriptionAdminName">Admin</label>
                                <input 
                                    type="text" 
                                    id="subscriptionAdminName" 
                                    readonly
                                    style="background: #f3f4f6; cursor: not-allowed;"
                                >
                            </div>

                            <div class="form-group">
                                <label for="subscriptionDate">Tugash Sanasi</label>
                                <input 
                                    type="date" 
                                    id="subscriptionDate" 
                                    name="due_date" 
                                    required
                                >
                            </div>
                            
                            <div class="form-group">
                                <label for="subscriptionPrice">To'lov Summasi</label>
                                <div class="input-with-suffix">
                                    <input 
                                        type="text"
                                        inputmode="numeric" 
                                        id="subscriptionPrice" 
                                        name="price" 
                                        placeholder="0" 
                                        required
                                    >
                                    <span class="input-suffix">so'm</span>
                                </div>
                            </div>
                            
                            <div id="subscriptionErrorMessage" class="error-message" style="display: none;"></div>
                            <div id="subscriptionSuccessMessage" class="success-message" style="display: none;"></div>
                            
                            <div style="display: flex; gap: 8px; justify-content: flex-end; margin-top: 16px;">
                                <button type="button" class="btn-cancel" id="cancelSubscription">Bekor qilish</button>
                                <button type="submit" class="add-btn" id="saveSubscriptionBtn">
                                    <span class="btn-text">Saqlash & Faollashtirish</span>
                                    <span class="btn-loader" id="subscriptionLoader" style="display: none;"></span>
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Settings Section (for super_admin) -->
                <div class="add-admin-card" id="settingsSection" style="display: none;">
                    <div class="card-header">
                        <h2>Sozlamalar</h2>
                        <button class="refresh-btn" id="refreshSettingsBtn" title="Yangilash" onclick="loadSettings()">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M1 4v6h6M23 20v-6h-6"></path>
                                <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"></path>
                            </svg>
                        </button>
                    </div>
                    <div class="settings-content">
                        <!-- Admin Permissions Management -->
                        <div id="adminPermissionsList" class="admin-permissions-list">
                            <!-- Adminlar ro'yxati bu yerda yuklanadi -->
                        </div>
                        
                        <!-- Change Password Section -->
                        <div class="password-change-section">
                            <div class="password-change-header">
                                <div class="password-change-icon">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                                        <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                                    </svg>
                                </div>
                                <div>
                                    <h3>Parolni O'zgartirish</h3>
                                    <p class="password-change-hint">Xavfsizlik uchun parolingizni muntazam yangilang</p>
                                </div>
                            </div>
                            <form id="changePasswordForm" class="password-change-form">
                                <!-- Hidden username field for accessibility (Chrome/Chromium requirement) -->
                                <input 
                                    type="text" 
                                    name="username" 
                                    autocomplete="username" 
                                    style="position: absolute; left: -9999px; width: 1px; height: 1px; opacity: 0; pointer-events: none;"
                                    aria-hidden="true"
                                    tabindex="-1"
                                >
                                <div class="password-input-group">
                                    <label for="changeCurrentPassword">Joriy Parol</label>
                                    <div class="password-input-wrapper">
                                        <svg class="password-input-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                                            <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                                        </svg>
                                        <input 
                                            type="password" 
                                            id="changeCurrentPassword" 
                                            name="currentPassword" 
                                            placeholder="Joriy parolni kiriting"
                                            required
                                            autocomplete="current-password"
                                            class="password-input"
                                        >
                                        <button type="button" class="password-toggle" onclick="togglePasswordVisibility('changeCurrentPassword', this)">
                                            <svg class="password-eye" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                                <circle cx="12" cy="12" r="3"></circle>
                                            </svg>
                                            <svg class="password-eye-off" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display: none;">
                                                <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path>
                                                <line x1="1" y1="1" x2="23" y2="23"></line>
                                            </svg>
                                        </button>
                                    </div>
                                </div>
                                <div class="password-input-group">
                                    <label for="changeNewPassword">Yangi Parol</label>
                                    <div class="password-input-wrapper">
                                        <svg class="password-input-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                                            <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                                        </svg>
                                        <input 
                                            type="password" 
                                            id="changeNewPassword" 
                                            name="newPassword" 
                                            placeholder="Yangi parolni kiriting"
                                            required
                                            autocomplete="new-password"
                                            class="password-input"
                                        >
                                        <button type="button" class="password-toggle" onclick="togglePasswordVisibility('changeNewPassword', this)">
                                            <svg class="password-eye" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                                <circle cx="12" cy="12" r="3"></circle>
                                            </svg>
                                            <svg class="password-eye-off" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display: none;">
                                                <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path>
                                                <line x1="1" y1="1" x2="23" y2="23"></line>
                                            </svg>
                                        </button>
                                    </div>
                                </div>
                                <div class="password-input-group">
                                    <label for="changeConfirmPassword">Parolni Tasdiqlash</label>
                                    <div class="password-input-wrapper">
                                        <svg class="password-input-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                                            <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                                        </svg>
                                        <input 
                                            type="password" 
                                            id="changeConfirmPassword" 
                                            name="confirmPassword" 
                                            placeholder="Yangi parolni qayta kiriting"
                                            required
                                            autocomplete="new-password"
                                            class="password-input"
                                        >
                                        <button type="button" class="password-toggle" onclick="togglePasswordVisibility('changeConfirmPassword', this)">
                                            <svg class="password-eye" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                                <circle cx="12" cy="12" r="3"></circle>
                                            </svg>
                                            <svg class="password-eye-off" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display: none;">
                                                <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path>
                                                <line x1="1" y1="1" x2="23" y2="23"></line>
                                            </svg>
                                        </button>
                                    </div>
                                </div>
                                <div id="passwordErrorMessage" class="password-error-message" style="display: none;"></div>
                                <div id="passwordSuccessMessage" class="password-success-message" style="display: none;"></div>
                                <button type="submit" class="password-change-btn" id="changePasswordBtn">
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path>
                                        <polyline points="17 21 17 13 7 13 7 21"></polyline>
                                        <polyline points="7 3 7 8 15 8"></polyline>
                                    </svg>
                                    <span class="btn-text">Parolni O'zgartirish</span>
                                    <span class="btn-loader" id="changePasswordLoader" style="display: none;"></span>
                                </button>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Organization Settings (for admin role only) -->
                <div class="add-admin-card" id="organizationSettingsSection">
                    <div class="card-header">
                        <h2>Tashkilot Sozlamalari</h2>
                        <button class="refresh-btn" id="refreshOrganizationBtn" title="Yangilash" onclick="loadOrganizationSettings()">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M1 4v6h6M23 20v-6h-6"></path>
                                <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"></path>
                            </svg>
                        </button>
                    </div>
                    <form id="organizationSettingsForm" class="organization-settings-form">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="organizationName">Tashkilot Nomi</label>
                                <input 
                                    type="text" 
                                    id="organizationName" 
                                    name="organization_name" 
                                    placeholder="Tashkilot nomini kiriting"
                                    autocomplete="off"
                                >
                            </div>
                            
                            <div class="form-group">
                                <label for="organizationPhone">Telefon</label>
                                <input 
                                    type="tel" 
                                    id="organizationPhone" 
                                    name="organization_phone" 
                                    placeholder="+998 XX XXX XX XX"
                                    autocomplete="off"
                                >
                            </div>
                            
                            <div class="form-group">
                                <label for="organizationAddress">Manzil</label>
                                <input 
                                    type="text" 
                                    id="organizationAddress" 
                                    name="organization_address" 
                                    placeholder="Tashkilot manzilini kiriting"
                                    autocomplete="off"
                                >
                            </div>
                            
                            <div class="form-group">
                                <label for="organizationEmail">Email</label>
                                <input 
                                    type="email" 
                                    id="organizationEmail" 
                                    name="organization_email" 
                                    placeholder="email@example.com"
                                    autocomplete="off"
                                >
                            </div>
                            
                            <div class="form-group form-group-full">
                                <label for="logoUpload">Logo</label>
                                <div class="logo-upload-wrapper">
                                    <img id="logoPreview" src="" alt="Logo" class="logo-preview">
                                    <div class="logo-upload-content">
                                        <input 
                                            type="file" 
                                            id="logoUpload" 
                                            name="logo" 
                                            accept="image/jpeg,image/jpg,image/png,image/gif,image/webp"
                                        >
                                        <small>JPEG, JPG, PNG, GIF, WebP (maksimal 5MB)</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Jarima Sozlamalari -->
                        <div class="penalty-settings-section">
                            <div class="penalty-settings-header">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83"></path>
                                </svg>
                                <h3>Jarima Sozlamalari</h3>
                            </div>
                            <div class="form-grid form-grid-compact">
                                <div class="form-group">
                                    <label for="lateThresholdMinutes">Kechikish Chegarasi</label>
                                    <input 
                                        type="text"
                                        inputmode="numeric"
                                        id="lateThresholdMinutes" 
                                        name="late_threshold_minutes" 
                                        placeholder="5"
                                        autocomplete="off"
                                    >
                                    <small>daqiqa</small>
                                </div>
                                
                                <div class="form-group">
                                    <label for="penaltyPerMinute">Jarima / Minut</label>
                                    <input 
                                        type="text"
                                        inputmode="numeric"
                                        id="penaltyPerMinute" 
                                        name="penalty_per_minute" 
                                        placeholder="1000"
                                        autocomplete="off"
                                    >
                                    <small>so'm</small>
                                </div>
                                
                                <div class="form-group">
                                    <label for="maxPenaltyPerDay">Maksimal Jarima</label>
                                    <input 
                                        type="text"
                                        inputmode="numeric"
                                        id="maxPenaltyPerDay" 
                                        name="max_penalty_per_day" 
                                        placeholder="50000"
                                        autocomplete="off"
                                    >
                                    <small>so'm/kun</small>
                                </div>
                            </div>
                        </div>
                        
                        <div id="organizationErrorMessage" class="error-message" style="display: none;"></div>
                        <div id="organizationSuccessMessage" class="success-message" style="display: none;"></div>
                        
                        <div class="form-actions">
                            <button type="button" class="btn-cancel" id="cancelOrganizationBtn">Bekor qilish</button>
                            <button type="submit" class="add-btn" id="saveOrganizationBtn">
                                <span class="btn-text">Saqlash</span>
                                <span class="btn-loader" id="saveOrganizationLoader" style="display: none;"></span>
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Terminals Management Section -->
                <div class="admins-list-card" id="terminalsManagementSection" style="display: none;">
                    <div class="card-header">
                        <h2>Terminallar Boshqaruvi</h2>
                        <div style="display: flex; gap: 10px; align-items: center;">
                            <button class="refresh-btn" id="refreshTerminalsBtn" title="Yangilash">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M1 4v6h6M23 20v-6h-6"></path>
                                    <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"></path>
                                </svg>
                            </button>
                            <button class="add-icon-btn" id="addTerminalIconBtn" title="Yangi terminal qo'shish">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                                    <path d="M12 5v14M5 12h14"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                    
                    <div id="loadingTerminalsMessage" class="loading-message" style="display: none;">
                        Yuklanmoqda...
                    </div>
                    
                    <div id="terminalsList" class="admins-list">
                        <!-- Terminals will be loaded here -->
                    </div>
                    
                    <div id="emptyTerminalsMessage" class="empty-message" style="display: none;">
                        Hozircha terminallar yo'q
                    </div>
                </div>

                <!-- Positions Management - REMOVED -->
                <div class="add-admin-card" id="positionsManagementSection" style="display: none !important;">
                    <h2>Lavozimlar Boshqaruvi</h2>
                    <form id="addPositionForm" class="add-admin-form">
                        <div class="form-row" style="grid-template-columns: 1fr 1fr auto;">
                            <div class="form-group">
                                <label for="positionName">Lavozim Nomi</label>
                                <input 
                                    type="text" 
                                    id="positionName" 
                                    name="name" 
                                    placeholder="Lavozim nomi kiriting"
                                    required
                                    autocomplete="off"
                                >
                            </div>
                            
                            <div class="form-group">
                                <label for="positionDescription">Tavsif</label>
                                <input 
                                    type="text" 
                                    id="positionDescription" 
                                    name="description" 
                                    placeholder="Tavsif (ixtiyoriy)"
                                    autocomplete="off"
                                >
                            </div>
                            
                            <button type="submit" class="add-btn" id="addPositionBtn">
                                <span class="btn-text">Qo'shish</span>
                                <span class="btn-loader" id="addPositionLoader" style="display: none;"></span>
                            </button>
                        </div>
                        
                        <div id="addPositionErrorMessage" class="error-message" style="display: none;"></div>
                        <div id="addPositionSuccessMessage" class="success-message" style="display: none;"></div>
                    </form>

                    <div style="margin-top: 30px;">
                        <div id="loadingPositionsMessage" class="loading-message" style="display: none;">
                            Yuklanmoqda...
                        </div>
                        
                        <div id="positionsList" class="admins-list">
                            <!-- Positions will be loaded here -->
                        </div>
                        
                        <div id="emptyPositionsMessage" class="empty-message" style="display: none;">
                            Hozircha lavozimlar yo'q
                        </div>
                    </div>
                </div>

                <!-- Employees Section with Submenu -->
                <div id="employeesSection" style="display: none;">
                    <!-- Employees Submenu -->
                    <div class="submenu-container">
                        <ul class="submenu">
                            <li>
                                <a href="#" class="submenu-link active" data-subsection="employeesListSection">
                                    Hodimlar
                                </a>
                            </li>
                            <li>
                                <a href="#" class="submenu-link" data-subsection="employeesAttendanceSection">
                                    Davomat
                                </a>
                            </li>
                            <li>
                                <a href="#" class="submenu-link" data-subsection="employeesDailyChangesSection">
                                    Kunlik o'zgarishlar
                                </a>
                            </li>
                            <li>
                                <a href="#" class="submenu-link" data-subsection="employeesPositionsSection">
                                    Lavozimlar
                                </a>
                            </li>
                            <li>
                                <a href="#" class="submenu-link" data-subsection="employeesSalarySection">
                                    Ish haqqi
                                </a>
                            </li>
                            <li>
                                <a href="#" class="submenu-link" data-subsection="employeesBonusesSection">
                                    Bonuslar
                                </a>
                            </li>
                            <li>
                                <a href="#" class="submenu-link" data-subsection="employeesPenaltiesSection">
                                    Jarimalar
                                </a>
                            </li>
                        </ul>
                    </div>

                    <!-- Employees List Subsection -->
                    <div class="admins-list-card employees-subsection" id="employeesListSection">
                        <div class="card-header">
                            <h2>Hodimlar Ro'yxati</h2>
                            <div style="display: flex; gap: 10px; align-items: center;">
                                <button class="refresh-btn" id="refreshEmployeesBtn" title="Yangilash">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M1 4v6h6M23 20v-6h-6"></path>
                                        <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"></path>
                                    </svg>
                                </button>
                                <button class="refresh-btn" id="downloadEmployeesBtn" title="Yuklab olish (Excel)">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                        <polyline points="7 10 12 15 17 10"></polyline>
                                        <line x1="12" y1="15" x2="12" y2="3"></line>
                                    </svg>
                                </button>
                                <button class="add-icon-btn" id="addEmployeeIconBtn" title="Yangi hodim qo'shish">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                                        <path d="M12 5v14M5 12h14"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        
                        <div id="loadingEmployeesMessage" class="loading-message" style="display: none;">
                            Yuklanmoqda...
                        </div>
                        
                        <div id="employeesList" style="overflow-x: auto;">
                            <table id="employeesTable" style="width: 100%; border-collapse: collapse; background: white; border-radius: 8px; overflow: hidden;">
                                <thead>
                                    <tr style="background: #f9fafb; border-bottom: 2px solid #e5e7eb;">
                                        <th style="padding: 12px 16px; text-align: center; font-weight: 600; color: #374151; font-size: 14px; width: 60px;">â„–</th>
                                        <th style="padding: 12px 16px; text-align: left; font-weight: 600; color: #374151; font-size: 14px;">Hodim</th>
                                        <th style="padding: 12px 16px; text-align: left; font-weight: 600; color: #374151; font-size: 14px;">Lavozim</th>
                                        <th style="padding: 12px 16px; text-align: left; font-weight: 600; color: #374151; font-size: 14px;">Ish kuni</th>
                                        <th style="padding: 12px 16px; text-align: left; font-weight: 600; color: #374151; font-size: 14px;">Keladi</th>
                                        <th style="padding: 12px 16px; text-align: left; font-weight: 600; color: #374151; font-size: 14px;">Ketadi</th>
                                        <th style="padding: 12px 16px; text-align: center; font-weight: 600; color: #374151; font-size: 14px;">Amallar</th>
                                    </tr>
                                </thead>
                                <tbody id="employeesTableBody">
                                    <!-- Employees will be loaded here -->
                                </tbody>
                            </table>
                        </div>
                        
                        <div id="emptyEmployeesMessage" class="empty-message" style="display: none;">
                            Hozircha hodimlar yo'q
                        </div>
                    </div>

                    <!-- Employees Attendance Subsection -->
                    <div class="admins-list-card employees-subsection" id="employeesAttendanceSection" style="display: none; position: relative;">
                        <div class="card-header" style="border-bottom: 1px solid #e2e8f0; padding-bottom: 10px; margin-bottom: 14px; position: relative;">
                            <h2 style="margin: 0; font-size: 16px; font-weight: 600; color: #0f172a; margin-bottom: 10px;">Keldi-ketdi Nazorati</h2>
                            <div style="position: absolute; top: 0; right: 0; display: flex; gap: 6px; align-items: center;">
                                <button class="refresh-btn" id="calendarAttendanceBtn" title="Davrni tanlash" style="padding: 6px; width: 28px; height: 28px;">
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                                        <line x1="16" y1="2" x2="16" y2="6"></line>
                                        <line x1="8" y1="2" x2="8" y2="6"></line>
                                        <line x1="3" y1="10" x2="21" y2="10"></line>
                                    </svg>
                                </button>
                                <button class="refresh-btn" id="downloadAttendanceBtn" title="Yuklab olish (Excel)" style="padding: 6px; width: 28px; height: 28px;">
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                        <polyline points="7 10 12 15 17 10"></polyline>
                                        <line x1="12" y1="15" x2="12" y2="3"></line>
                                    </svg>
                                </button>
                                <button class="refresh-btn" id="refreshAttendanceBtn" title="Yangilash" style="padding: 6px; width: 28px; height: 28px;">
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M1 4v6h6M23 20v-6h-6"></path>
                                        <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"></path>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Calendar Widget -->
                        <div id="attendanceCalendarWidget" style="display: none; position: absolute; top: 60px; right: 0; z-index: 1000; background: white; border: 1px solid #e2e8f0; border-radius: 10px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.06); padding: 12px; min-width: 280px;">
                            <!-- Calendar content will be generated here -->
                        </div>
                        
                        <!-- Statistics - Modern Compact Design -->
                        <div id="todayStatsContainer" style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 6px; margin-bottom: 14px;">
                            <!-- Stats will be loaded here -->
                        </div>
                        
                        <!-- Employee List - Minimal Design -->
                        <div id="loadingAttendanceMessage" class="loading-message" style="display: none; padding: 20px; text-align: center; color: #64748b; font-size: 13px;">
                            Yuklanmoqda...
                        </div>

                        <div id="attendanceList" style="display: grid; gap: 6px;">
                            <!-- Employee attendance items will be loaded here -->
                        </div>
                        
                        <div id="emptyAttendanceMessage" class="empty-message" style="display: none; text-align: center; padding: 30px; color: #94a3b8; font-size: 13px;">
                            Keldi-ketdi yozuvlari topilmadi
                        </div>
                    </div>

                    <!-- Employees Daily Changes Subsection -->
                    <div class="admins-list-card employees-subsection" id="employeesDailyChangesSection" style="display: none; position: relative;">
                        <div class="card-header" style="border-bottom: 1px solid #e2e8f0; padding-bottom: 10px; margin-bottom: 14px; position: relative;">
                            <h2 style="margin: 0; font-size: 16px; font-weight: 600; color: #0f172a; margin-bottom: 10px;">Kunlik o'zgarishlar</h2>
                            <div style="position: absolute; top: 0; right: 0; display: flex; gap: 6px; align-items: center;">
                                <button class="refresh-btn" id="calendarDailyChangesBtn" title="Davrni tanlash" style="padding: 6px; width: 28px; height: 28px;">
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                                        <line x1="16" y1="2" x2="16" y2="6"></line>
                                        <line x1="8" y1="2" x2="8" y2="6"></line>
                                        <line x1="3" y1="10" x2="21" y2="10"></line>
                                    </svg>
                                </button>
                                <button class="refresh-btn" id="downloadDailyChangesBtn" title="Yuklab olish (Excel)" style="padding: 6px; width: 28px; height: 28px;">
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                        <polyline points="7 10 12 15 17 10"></polyline>
                                        <line x1="12" y1="15" x2="12" y2="3"></line>
                                    </svg>
                                </button>
                                <button class="refresh-btn" id="refreshDailyChangesBtn" title="Yangilash" style="padding: 6px; width: 28px; height: 28px;">
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M1 4v6h6M23 20v-6h-6"></path>
                                        <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"></path>
                                    </svg>
                                </button>
                                <button class="add-icon-btn" id="addDailyChangeIconBtn" title="Yangi o'zgarish qo'shish" style="padding: 6px; width: 28px; height: 28px;">
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                                        <path d="M12 5v14M5 12h14"/>
                                    </svg>
                                </button>
                            </div>
                        </div>

                        <!-- Calendar Widget -->
                        <div id="dailyChangesCalendarWidget" style="display: none; position: absolute; top: 60px; right: 0; z-index: 1000; background: white; border: 1px solid #e2e8f0; border-radius: 10px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.06); padding: 12px; min-width: 280px;">
                            <!-- Calendar content will be generated here -->
                        </div>

                        <!-- Statistics - Modern Compact Design -->
                        <div id="dailyChangesStatsContainer" style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 6px; margin-bottom: 14px;">
                            <!-- Stats will be loaded here -->
                        </div>

                        <!-- Search and Quick Filters - Compact -->
                        <div style="display: flex; gap: 8px; margin-bottom: 14px; align-items: center; flex-wrap: wrap;">
                            <input type="text" id="dailyChangesSearch" placeholder="Qidirish..." style="flex: 1; min-width: 200px; padding: 8px 12px; border: 1px solid #e2e8f0; border-radius: 8px; font-size: 13px; background: white;">
                            <select id="dailyChangesTypeFilter" style="padding: 8px 12px; border: 1px solid #e2e8f0; border-radius: 8px; font-size: 13px; background: white; min-width: 160px;">
                                <option value="">Barcha turlar</option>
                                <option value="position_change">Lavozim almashtirish</option>
                                <option value="substitute">O'rniga ishlash</option>
                                <option value="other">Boshqa</option>
                            </select>
                        </div>
                        
                        <div id="loadingDailyChangesMessage" class="loading-message" style="display: none; padding: 20px; text-align: center; color: #64748b; font-size: 13px;">
                            Yuklanmoqda...
                        </div>

                        <div id="dailyChangesList" style="display: grid; gap: 6px;">
                            <!-- Daily changes will be loaded here -->
                        </div>
                        
                        <div id="emptyDailyChangesMessage" class="empty-message" style="display: none; text-align: center; padding: 30px; color: #94a3b8; font-size: 13px;">
                            Hozircha o'zgarishlar yo'q
                        </div>
                    </div>

                    <!-- Employees Positions Subsection -->
                    <div class="admins-list-card employees-subsection" id="employeesPositionsSection" style="display: none;">
                        <div class="card-header">
                            <h2>Lavozimlar</h2>
                            <button class="add-icon-btn" id="addPositionIconBtn" title="Yangi lavozim qo'shish">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                                    <path d="M12 5v14M5 12h14"/>
                                </svg>
                            </button>
                        </div>
                        <div id="loadingPositionsMessage" class="loading-message" style="display: none;">
                            Yuklanmoqda...
                        </div>
                        
                        <div id="positionsList" style="display: grid; gap: 8px;">
                            <!-- Positions will be loaded here -->
                        </div>
                        
                        <div id="emptyPositionsMessage" class="empty-message" style="display: none;">
                            Hozircha lavozimlar yo'q
                        </div>
                    </div>

                    <!-- Employees Salary Section -->
                    <div class="admins-list-card employees-subsection" id="employeesSalarySection" style="display: none;">
                        <div class="card-header">
                            <h2>Ish haqqi</h2>
                            <div style="display: flex; gap: 10px; align-items: center;">
                                <button class="refresh-btn" id="refreshSalaryRatesBtn" title="Yangilash">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M1 4v6h6M23 20v-6h-6"></path>
                                        <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"></path>
                                    </svg>
                                </button>
                                <button class="add-icon-btn" id="addSalaryRateIconBtn" title="Ish haqqi belgilash">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                                        <path d="M12 5v14M5 12h14"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        
                        <div id="loadingSalaryRatesMessage" class="loading-message" style="display: none;">
                            Yuklanmoqda...
                        </div>
                        
                        <div id="salaryRatesList" style="display: grid; gap: 8px;">
                            <!-- Salary rates will be loaded here -->
                        </div>
                        
                        <div id="emptySalaryRatesMessage" class="empty-message" style="display: none;">
                            Hozircha ish haqqi belgilanmagan
                        </div>
                    </div>

                    <!-- Employees Bonuses Section -->
                    <div class="admins-list-card employees-subsection" id="employeesBonusesSection" style="display: none;">
                        <div class="card-header" style="border-bottom: 1px solid #e5e7eb; padding-bottom: 12px; margin-bottom: 16px; position: relative;">
                            <h2 style="margin: 0; font-size: 18px; font-weight: 600; color: #111827; margin-bottom: 12px;">Bonuslar</h2>
                            <div style="position: absolute; top: 0; right: 0; display: flex; gap: 10px; align-items: center;">
                                <button class="refresh-btn" id="refreshBonusesBtn" title="Yangilash">
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M1 4v6h6M23 20v-6h-6"></path>
                                        <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"></path>
                                    </svg>
                                </button>
                                <button class="add-icon-btn" id="addBonusIconBtn" title="Yangi bonus qo'shish">
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                                        <path d="M12 5v14M5 12h14"/>
                                    </svg>
                                </button>
                            </div>
                        </div>

                        <!-- Filter Section -->
                        <div style="display: flex; gap: 10px; margin-bottom: 16px; align-items: center; flex-wrap: wrap;">
                            <select id="bonusEmployeeFilter" style="padding: 8px 12px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 13px; background: white; min-width: 180px;">
                                <option value="">Barcha hodimlar</option>
                            </select>
                            <select id="bonusPeriodTypeFilter" style="padding: 8px 12px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 13px; background: white; min-width: 130px;">
                                <option value="">Barcha davrlar</option>
                                <option value="daily">Kunlik</option>
                                <option value="weekly">Haftalik</option>
                                <option value="monthly">Oylik</option>
                            </select>
                            <input type="date" id="bonusDateFilter" style="padding: 8px 12px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 13px; background: white;">
                        </div>
                        
                        <div id="loadingBonusesMessage" class="loading-message" style="display: none;">
                            Yuklanmoqda...
                        </div>

                        <div id="bonusesList" style="display: grid; gap: 10px;">
                            <!-- Bonuses will be loaded here -->
                        </div>
                        
                        <div id="emptyBonusesMessage" class="empty-message" style="display: none; text-align: center; padding: 40px; color: #9ca3af;">
                            Hozircha bonuslar yo'q
                        </div>
                    </div>

                    <!-- Employees Penalties Section -->
                    <div class="admins-list-card employees-subsection" id="employeesPenaltiesSection" style="display: none;">
                        <div class="card-header" style="border-bottom: 1px solid #e5e7eb; padding-bottom: 12px; margin-bottom: 16px; position: relative;">
                            <h2 style="margin: 0; font-size: 18px; font-weight: 600; color: #111827; margin-bottom: 12px;">Jarimalar</h2>
                            <div style="position: absolute; top: 0; right: 0; display: flex; gap: 10px; align-items: center;">
                                <button class="refresh-btn" id="refreshPenaltiesBtn" title="Yangilash">
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M1 4v6h6M23 20v-6h-6"></path>
                                        <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"></path>
                                    </svg>
                                </button>
                                <button class="add-icon-btn" id="addPenaltyIconBtn" title="Yangi jarima qo'shish">
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                                        <path d="M12 5v14M5 12h14"/>
                                    </svg>
                                </button>
                            </div>
                        </div>

                        <!-- Filter Section -->
                        <div style="display: flex; gap: 10px; margin-bottom: 16px; align-items: center; flex-wrap: wrap;">
                            <select id="penaltyEmployeeFilter" style="padding: 8px 12px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 13px; background: white; min-width: 180px;">
                                <option value="">Barcha hodimlar</option>
                            </select>
                            <select id="penaltyPeriodTypeFilter" style="padding: 8px 12px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 13px; background: white; min-width: 130px;">
                                <option value="">Barcha davrlar</option>
                                <option value="daily">Kunlik</option>
                                <option value="weekly">Haftalik</option>
                                <option value="monthly">Oylik</option>
                            </select>
                            <input type="date" id="penaltyDateFilter" style="padding: 8px 12px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 13px; background: white;">
                        </div>
                        
                        <div id="loadingPenaltiesMessage" class="loading-message" style="display: none;">
                            Yuklanmoqda...
                        </div>

                        <div id="penaltiesList" style="display: grid; gap: 10px;">
                            <!-- Penalties will be loaded here -->
                        </div>
                        
                        <div id="emptyPenaltiesMessage" class="empty-message" style="display: none; text-align: center; padding: 40px; color: #9ca3af;">
                            Hozircha jarimalar yo'q
                        </div>
                    </div>
                </div>

                <!-- Moliya Section -->
                <div id="incomeSection" style="display: none;">
                    <div class="admins-list-card">
                        <div class="card-header" style="position: relative;">
                            <h2>Maoshlar</h2>
                            <div style="display: flex; gap: 10px; align-items: center;">
                                <button class="refresh-btn" id="calendarSalariesBtn" title="Davrni tanlash" style="padding: 6px; width: 28px; height: 28px;">
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                                        <line x1="16" y1="2" x2="16" y2="6"></line>
                                        <line x1="8" y1="2" x2="8" y2="6"></line>
                                        <line x1="3" y1="10" x2="21" y2="10"></line>
                                    </svg>
                                </button>
                                <button class="refresh-btn" id="downloadSalariesReportBtn" title="Hisobotni yuklab olish (Excel)">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                        <polyline points="7 10 12 15 17 10"></polyline>
                                        <line x1="12" y1="15" x2="12" y2="3"></line>
                                    </svg>
                                </button>
                                <button class="refresh-btn" id="refreshSalariesBtn" title="Yangilash">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M1 4v6h6M23 20v-6h-6"></path>
                                        <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"></path>
                                    </svg>
                                </button>
                            </div>
                            
                            <!-- Calendar Widget -->
                            <div id="salariesCalendarWidget" style="display: none; position: absolute; top: 60px; right: 0; z-index: 1000; background: white; border: 1px solid #e2e8f0; border-radius: 10px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.06); padding: 12px; min-width: 280px;">
                                <!-- Calendar content will be generated here -->
                            </div>
                        </div>
                        
                        <!-- Statistics - Minimal Design -->
                        <div id="salaryStatsContainer" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 8px; margin-bottom: 16px;">
                            <!-- Stats will be loaded here -->
                        </div>
                        
                        <div style="display: flex; gap: 10px; margin-bottom: 16px; flex-wrap: wrap; align-items: center;">
                            <select id="salaryEmployeeFilter" style="padding: 6px 10px; border: 1px solid #e5e7eb; border-radius: 6px; background: white; color: #374151; font-size: 13px; font-weight: 500; cursor: pointer; min-width: 180px;">
                                <option value="">Barcha hodimlar</option>
                                <!-- Employee options will be loaded here -->
                            </select>
                        </div>
                        
                        <div id="loadingSalariesMessage" class="loading-message" style="display: none;">
                            Yuklanmoqda...
                        </div>
                        
                        <div id="salariesEmployeesList" style="display: flex; flex-direction: column; gap: 6px;">
                            <!-- Employees with their salary lists will be loaded here -->
                        </div>
                        
                        <div id="emptySalariesMessage" class="empty-message" style="display: none; text-align: center; padding: 40px 20px; color: #9ca3af;">
                            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="margin: 0 auto 12px; opacity: 0.3;">
                                <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                            </svg>
                            <div style="font-size: 14px; font-weight: 500; margin-bottom: 4px;">Hozircha maoshlar yo'q</div>
                            <div style="font-size: 12px; opacity: 0.8;">Maoshlar avtomatik hisoblanadi</div>
                        </div>
                    </div>
                </div>

                <!-- Salaries Management - REMOVED -->
                <div class="add-admin-card" id="salariesManagementSection" style="display: none !important;">
                    <h2>Hodim Maoshlari</h2>
                    <form id="addSalaryForm" class="add-admin-form">
                        <div class="form-row" style="grid-template-columns: 1fr 1fr;">
                            <div class="form-group">
                                <label for="salaryEmployee">Hodim</label>
                                <select 
                                    id="salaryEmployee" 
                                    name="employee_id"
                                    required
                                >
                                    <option value="">Hodimni tanlang</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="salaryWorkPosition">Ishlagan Lavozimi (ixtiyoriy)</label>
                                <select 
                                    id="salaryWorkPosition" 
                                    name="work_position"
                                >
                                    <option value="">O'z lavozimida (asosiy lavozim)</option>
                                </select>
                                <small class="form-hint">Agar boshqa lavozimda ishlagan bo'lsa, tanlang (masalan: yordamchi ofitsant o'rniga ofitsantlik qilgan)</small>
                            </div>
                        </div>
                        
                        <div class="form-row" style="grid-template-columns: 1fr 1fr 1fr auto;">
                            <div class="form-group">
                                <label for="salaryAmount">Summa</label>
                                <input 
                                    type="text" 
                                    inputmode="decimal"
                                    id="salaryAmount" 
                                    name="amount" 
                                    placeholder="Summa kiriting"
                                    required
                                    autocomplete="off"
                                >
                            </div>
                            
                            <div class="form-group">
                                <label for="salaryPeriodType">Davr Turi</label>
                                <select 
                                    id="salaryPeriodType" 
                                    name="period_type"
                                    required
                                >
                                    <option value="">Tanlang</option>
                                    <option value="daily">Kunlik</option>
                                    <option value="weekly">Haftalik</option>
                                    <option value="monthly">Oylik</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="salaryPeriodDate">Sana</label>
                                <input 
                                    type="date" 
                                    id="salaryPeriodDate" 
                                    name="period_date" 
                                    required
                                >
                            </div>
                            
                            <button type="submit" class="add-btn" id="addSalaryBtn" style="align-self: flex-end;">
                                <span class="btn-text">Qo'shish</span>
                                <span class="btn-loader" id="addSalaryLoader" style="display: none;"></span>
                            </button>
                        </div>
                        
                        <div class="form-group">
                            <label for="salaryNotes">Izoh (ixtiyoriy)</label>
                            <input 
                                type="text" 
                                id="salaryNotes" 
                                name="notes" 
                                placeholder="Izoh kiriting"
                                autocomplete="off"
                            >
                        </div>
                        
                        <div id="addSalaryErrorMessage" class="error-message" style="display: none;"></div>
                        <div id="addSalarySuccessMessage" class="success-message" style="display: none;"></div>
                    </form>
                </div>

                <!-- Salaries List - REMOVED -->
                <div class="admins-list-card" id="salariesListSection" style="display: none !important;">
                    <div class="card-header">
                        <h2>Maoshlar Ro'yxati</h2>
                        <div style="display: flex; gap: 10px; align-items: center;">
                            <select id="salaryFilterPeriod" style="padding: 8px 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 14px;">
                                <option value="">Barcha davrlar</option>
                                <option value="daily">Kunlik</option>
                                <option value="weekly">Haftalik</option>
                                <option value="monthly">Oylik</option>
                            </select>
                            <button class="refresh-btn" id="refreshSalariesBtn" title="Yangilash">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M1 4v6h6M23 20v-6h-6"></path>
                                    <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                    
                    <div id="loadingSalariesMessage" class="loading-message" style="display: none;">
                        Yuklanmoqda...
                    </div>
                    
                    <div id="salariesList" class="admins-list">
                        <!-- Salaries will be loaded here -->
                    </div>
                    
                    <div id="emptySalariesMessage" class="empty-message" style="display: none;">
                        Hozircha maoshlar yo'q
                    </div>
                </div>

                <!-- Statistics Section (for super_admin) -->
                <div class="admins-list-card" id="statisticsSection" style="display: none; background: white; border: 1px solid #e5e7eb; border-radius: 8px; padding: 20px; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);">
                    <div class="card-header" style="border-bottom: 1px solid #e5e7eb; padding-bottom: 12px; margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center;">
                        <h2 style="font-size: 18px; font-weight: 600; color: #111827; margin: 0;">Statistika</h2>
                        <button class="refresh-btn" id="refreshStatisticsBtn" title="Yangilash" onclick="loadStatistics()" style="padding: 6px 10px; background: #f3f4f6; border: 1px solid #e5e7eb; border-radius: 6px; cursor: pointer; transition: all 0.2s;" onmouseover="this.style.background='#e5e7eb'" onmouseout="this.style.background='#f3f4f6'">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M1 4v6h6M23 20v-6h-6"></path>
                                <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"></path>
                            </svg>
                        </button>
                    </div>
                    <div id="statisticsContent" style="min-height: 400px;">
                        <!-- Statistics will be loaded here -->
                    </div>
                </div>
            </div>
            </div>
        </main>
    </div>

    <!-- Edit admin modal -->
    <div id="editModal" class="modal" style="display: none;">
        <div class="modal-content">
            <h3>Adminni tahrirlash</h3>
            <form id="editAdminForm" class="edit-form">
                <div class="form-group">
                    <label for="editUsername">Username</label>
                    <input 
                        type="text" 
                        id="editUsername" 
                        name="username" 
                        placeholder="Username kiriting"
                        required
                        autocomplete="off"
                    >
                </div>
                
                <div class="form-group">
                    <label for="editPassword">Yangi Password</label>
                    <input 
                        type="password" 
                        id="editPassword" 
                        name="password" 
                        placeholder="Yangi password kiriting (bo'sh qoldirish mumkin)"
                        autocomplete="new-password"
                    >
                    <small class="form-hint">Agar o'zgartirmasangiz, bo'sh qoldiring</small>
                </div>
                
                <div class="form-group">
                    <label for="editRole">Rol</label>
                    <select 
                        id="editRole" 
                        name="role"
                        required
                    >
                        <option value="admin">Admin</option>
                        <option value="super_admin">Super Admin</option>
                    </select>
                    <small class="form-hint">Super admin vakolatini berish yoki olib tashlash</small>
                </div>
                
                <div id="editErrorMessage" class="error-message" style="display: none;"></div>
                <div id="editSuccessMessage" class="success-message" style="display: none;"></div>
                
                <div class="modal-actions">
                    <button type="button" class="btn-cancel" id="cancelEditBtn">Bekor qilish</button>
                    <button type="submit" class="btn-save" id="saveEditBtn">
                        <span class="btn-text">Saqlash</span>
                        <span class="btn-loader" id="editLoader" style="display: none;"></span>
                    </button>
                </div>
            </form>
        </div>
    </div>


    <!-- Add position modal -->
    <div id="addPositionModal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 600px;">
            <h2 style="margin-top: 0; margin-bottom: 25px;">Yangi Lavozim Qo'shish</h2>
            <form id="addPositionModalForm" class="add-admin-form">
                <div class="form-row" style="grid-template-columns: 1fr;">
                    <div class="form-group">
                        <label for="modalPositionName">Lavozim Nomi</label>
                        <input 
                            type="text" 
                            id="modalPositionName" 
                            name="name" 
                            placeholder="Lavozim nomi kiriting"
                            required
                            autocomplete="off"
                        >
                    </div>
                </div>
                
                <div class="form-row" style="grid-template-columns: 1fr;">
                    <div class="form-group">
                        <label for="modalPositionDescription">Tavsif (ixtiyoriy)</label>
                        <input 
                            type="text" 
                            id="modalPositionDescription" 
                            name="description" 
                            placeholder="Tavsif kiriting"
                            autocomplete="off"
                        >
                    </div>
                </div>
                
                <div id="modalAddPositionErrorMessage" class="error-message" style="display: none;"></div>
                <div id="modalAddPositionSuccessMessage" class="success-message" style="display: none;"></div>
                
                <div class="modal-actions" style="margin-top: 20px;">
                    <button type="button" class="btn-cancel" id="cancelAddPositionModalBtn">Bekor qilish</button>
                    <button type="submit" class="btn-save" id="saveAddPositionModalBtn">
                        <span class="btn-text">Qo'shish</span>
                        <span class="btn-loader" id="modalAddPositionLoader" style="display: none;"></span>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Daily Change Modal -->
    <!-- Add Daily Change Modal -->
    <div id="addDailyChangeModal" class="modal" style="display: none;">
        <div class="modal-content add-daily-change-modal-content">
            <div class="modal-header">
                <div>
                    <h3>Yangi Kunlik O'zgarish</h3>
                    <p class="modal-subtitle">Hodim uchun kunlik o'zgarish qo'shing</p>
                </div>
                <button class="modal-close-btn" id="closeAddDailyChangeModalBtn">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <form id="addDailyChangeModalForm" class="edit-form">
                    <div class="form-row-2">
                        <div class="form-group">
                            <label for="modalDailyChangeEmployee">Hodim *</label>
                            <select id="modalDailyChangeEmployee" name="employee_id" required>
                                <option value="">Hodimni tanlang</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="modalDailyChangeDate">Sana *</label>
                            <input 
                                type="date" 
                                id="modalDailyChangeDate" 
                                name="change_date" 
                                required
                            >
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="modalDailyChangeType">O'zgarish Turi *</label>
                        <select id="modalDailyChangeType" name="change_type" required>
                            <option value="">Tanlang</option>
                            <option value="position_change">Lavozim almashtirish</option>
                            <option value="substitute">Boshqa hodim o'rniga ishlash</option>
                            <option value="other">Boshqa</option>
                        </select>
                    </div>
                    
                    <!-- Position change fields -->
                    <div id="positionChangeFields" class="conditional-fields" style="display: none;">
                        <div class="form-group">
                            <label for="modalDailyChangeNewPosition">Yangi Lavozim *</label>
                            <select id="modalDailyChangeNewPosition" name="new_position">
                                <option value="">Tanlang</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Substitute fields -->
                    <div id="substituteFields" class="conditional-fields" style="display: none;">
                        <div class="form-group">
                            <label for="modalDailyChangeSubstituteEmployee">O'rniga Ishlaydigan Hodim *</label>
                            <select id="modalDailyChangeSubstituteEmployee" name="substitute_employee_id">
                                <option value="">Tanlang</option>
                            </select>
                            <div class="form-hint">Yuqorida tanlangan hodim o'rniga kim ishlaydi</div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="modalDailyChangeNotes">Izoh (ixtiyoriy)</label>
                        <textarea 
                            id="modalDailyChangeNotes" 
                            name="notes" 
                            rows="3"
                            placeholder="Izoh kiriting"
                        ></textarea>
                    </div>
                    
                    <div id="modalAddDailyChangeErrorMessage" class="error-message" style="display: none;"></div>
                    <div id="modalAddDailyChangeSuccessMessage" class="success-message" style="display: none;"></div>
                    
                    <div class="modal-actions">
                        <button type="button" class="btn-cancel" id="cancelAddDailyChangeModalBtn">Bekor qilish</button>
                        <button type="submit" class="btn-save" id="saveAddDailyChangeModalBtn">
                            <span class="btn-text">Qo'shish</span>
                            <span class="btn-loader" id="modalAddDailyChangeLoader" style="display: none;"></span>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Salary Rate Modal -->
    <div id="addSalaryRateModal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 600px;">
            <h2 style="margin-top: 0; margin-bottom: 25px;">Ish Haqqi Belgilash</h2>
            <form id="addSalaryRateModalForm" class="add-admin-form">
                <div class="form-row" style="grid-template-columns: 1fr;">
                    <div class="form-group">
                        <label for="modalSalaryRateType">Belgilash Turi *</label>
                        <select id="modalSalaryRateType" name="rate_type" required>
                            <option value="">Tanlang</option>
                            <option value="employee">Hodimga belgilash</option>
                            <option value="position">Lavozimga belgilash</option>
                        </select>
                    </div>
                </div>
                
                <!-- Employee selection (shown when employee is selected) -->
                <div id="employeeRateFields" style="display: none;">
                    <div class="form-row" style="grid-template-columns: 1fr;">
                        <div class="form-group">
                            <label for="modalSalaryRateEmployee">Hodim *</label>
                            <select id="modalSalaryRateEmployee" name="employee_id">
                                <option value="">Hodimni tanlang</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <!-- Position selection (shown when position is selected) -->
                <div id="positionRateFields" style="display: none;">
                    <div class="form-row" style="grid-template-columns: 1fr;">
                        <div class="form-group">
                            <label for="modalSalaryRatePosition">Lavozim *</label>
                            <select id="modalSalaryRatePosition" name="position_name">
                                <option value="">Lavozimni tanlang</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="form-row" style="grid-template-columns: 1fr 1fr;">
                    <div class="form-group">
                        <label for="modalSalaryRateAmount">Ish Haqqi Summasi *</label>
                        <input 
                            type="text" 
                            inputmode="decimal"
                            id="modalSalaryRateAmount" 
                            name="amount" 
                            placeholder="Summa kiriting"
                            required
                            autocomplete="off"
                        >
                    </div>
                    
                    <div class="form-group">
                        <label for="modalSalaryRatePeriodType">Ish Haqqi Turi *</label>
                        <select id="modalSalaryRatePeriodType" name="period_type" required>
                            <option value="">Tanlang</option>
                            <option value="monthly">Oylik</option>
                            <option value="weekly">Haftalik</option>
                            <option value="daily">Kunlik</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row" style="grid-template-columns: 1fr;">
                    <div class="form-group">
                        <label for="modalSalaryRateNotes">Izoh (ixtiyoriy)</label>
                        <textarea 
                            id="modalSalaryRateNotes" 
                            name="notes" 
                            rows="2"
                            placeholder="Izoh kiriting"
                        ></textarea>
                    </div>
                </div>
                
                <div id="modalAddSalaryRateErrorMessage" class="error-message" style="display: none;"></div>
                <div id="modalAddSalaryRateSuccessMessage" class="success-message" style="display: none;"></div>
                
                <div class="modal-actions" style="margin-top: 20px;">
                    <button type="button" class="btn-cancel" id="cancelAddSalaryRateModalBtn">Bekor qilish</button>
                    <button type="submit" class="btn-save" id="saveAddSalaryRateModalBtn">
                        <span class="btn-text">Saqlash</span>
                        <span class="btn-loader" id="modalAddSalaryRateLoader" style="display: none;"></span>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit Salary Rate Modal -->
    <div id="editSalaryRateModal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 600px;">
            <h2 style="margin-top: 0; margin-bottom: 25px;">Ish Haqqini Tahrirlash</h2>
            <form id="editSalaryRateModalForm" class="add-admin-form">
                <div class="form-row" style="grid-template-columns: 1fr;">
                    <div class="form-group">
                        <label for="editSalaryRateAmount">Ish Haqqi Summasi *</label>
                        <input 
                            type="text" 
                            inputmode="decimal"
                            id="editSalaryRateAmount" 
                            name="amount" 
                            placeholder="Summa kiriting"
                            required
                            autocomplete="off"
                        >
                    </div>
                </div>
                
                <div class="form-row" style="grid-template-columns: 1fr;">
                    <div class="form-group">
                        <label for="editSalaryRatePeriodType">Davr Turi *</label>
                        <select id="editSalaryRatePeriodType" name="period_type" required>
                            <option value="daily">Kunlik</option>
                            <option value="weekly">Haftalik</option>
                            <option value="monthly">Oylik</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row" style="grid-template-columns: 1fr;">
                    <div class="form-group">
                        <label for="editSalaryRateNotes">Izoh (ixtiyoriy)</label>
                        <textarea 
                            id="editSalaryRateNotes" 
                            name="notes" 
                            placeholder="Izoh kiriting"
                            rows="3"
                            style="resize: vertical;"
                        ></textarea>
                    </div>
                </div>
                
                <div id="modalEditSalaryRateErrorMessage" class="error-message" style="display: none;"></div>
                <div id="modalEditSalaryRateSuccessMessage" class="success-message" style="display: none;"></div>
                
                <div class="modal-actions">
                    <button type="button" class="btn-cancel" id="cancelEditSalaryRateModalBtn">Bekor qilish</button>
                    <button type="submit" class="btn-save" id="saveEditSalaryRateModalBtn">
                        <span class="btn-text">Saqlash</span>
                        <span class="btn-loader" id="modalEditSalaryRateLoader" style="display: none;"></span>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Bonus Modal -->
    <div id="addBonusModal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 600px;">
            <h2 style="margin-top: 0; margin-bottom: 25px;">Yangi Bonus Qo'shish</h2>
            <form id="addBonusModalForm" class="add-admin-form">
                <div class="form-row" style="grid-template-columns: 1fr;">
                    <div class="form-group">
                        <label for="modalBonusEmployee">Hodim *</label>
                        <select id="modalBonusEmployee" name="employee_id" required>
                            <option value="">Hodimni tanlang</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row" style="grid-template-columns: 1fr 1fr;">
                    <div class="form-group">
                        <label for="modalBonusAmount">Bonus Summasi *</label>
                        <input 
                            type="number" 
                            id="modalBonusAmount" 
                            name="amount" 
                            placeholder="Summa kiriting"
                            step="0.01"
                            min="0"
                            required
                            autocomplete="off"
                        >
                    </div>
                    
                    <div class="form-group">
                        <label for="modalBonusDate">Bonus Sanasi *</label>
                        <input 
                            type="date" 
                            id="modalBonusDate" 
                            name="bonus_date" 
                            required
                        >
                    </div>
                </div>
                
                <div class="form-row" style="grid-template-columns: 1fr 1fr;">
                    <div class="form-group">
                        <label for="modalBonusPeriodType">Davr Turi *</label>
                        <select id="modalBonusPeriodType" name="period_type" required>
                            <option value="">Tanlang</option>
                            <option value="daily">Kunlik</option>
                            <option value="weekly">Haftalik</option>
                            <option value="monthly">Oylik</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="modalBonusPeriodDate">Davr Sanasi *</label>
                        <input 
                            type="date" 
                            id="modalBonusPeriodDate" 
                            name="period_date" 
                            required
                        >
                    </div>
                </div>
                
                <div class="form-row" style="grid-template-columns: 1fr;">
                    <div class="form-group">
                        <label for="modalBonusReason">Sabab (ixtiyoriy)</label>
                        <textarea 
                            id="modalBonusReason" 
                            name="reason" 
                            rows="3"
                            placeholder="Bonus berilish sababini kiriting"
                            style="resize: vertical;"
                        ></textarea>
                    </div>
                </div>
                
                <div id="modalAddBonusErrorMessage" class="error-message" style="display: none;"></div>
                <div id="modalAddBonusSuccessMessage" class="success-message" style="display: none;"></div>
                
                <div class="modal-actions" style="margin-top: 20px;">
                    <button type="button" class="btn-cancel" id="cancelAddBonusModalBtn">Bekor qilish</button>
                    <button type="submit" class="btn-save" id="saveAddBonusModalBtn">
                        <span class="btn-text">Qo'shish</span>
                        <span class="btn-loader" id="modalAddBonusLoader" style="display: none;"></span>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit employee modal -->
    <div id="editEmployeeModal" class="modal" style="display: none;">
        <div class="modal-content edit-employee-modal-content">
            <div class="modal-header">
                <h3>Hodimni tahrirlash</h3>
            </div>
            <div class="modal-body">
                <form id="editEmployeeFormModal" class="edit-employee-form-compact">
                    <div class="form-grid-compact">
                        <div class="form-group">
                            <label for="editEmployeeUsername">Username</label>
                            <input 
                                type="text" 
                                id="editEmployeeUsername" 
                                name="username" 
                                placeholder="Username"
                                required
                                autocomplete="off"
                            >
                        </div>
                        
                        <div class="form-group">
                            <label for="editEmployeeFullName">To'liq Ism</label>
                            <input 
                                type="text" 
                                id="editEmployeeFullName" 
                                name="full_name" 
                                placeholder="To'liq ism"
                                required
                            >
                        </div>

                        <div class="form-group">
                            <label for="editEmployeePosition">Lavozim</label>
                            <select 
                                id="editEmployeePosition" 
                                name="position" 
                                required
                            >
                                <option value="">Lavozimni tanlang</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="editEmployeePassword">Yangi Password</label>
                            <input 
                                type="password" 
                                id="editEmployeePassword" 
                                name="password" 
                                placeholder="O'zgartirmasangiz bo'sh qoldiring"
                                autocomplete="new-password"
                            >
                            <small class="form-hint">O'zgartirmasangiz bo'sh qoldiring</small>
                        </div>

                        <div class="form-group">
                            <label for="editEmployeePhone">Telefon</label>
                            <input 
                                type="text" 
                                id="editEmployeePhone" 
                                name="phone" 
                                placeholder="+998 XX XXX XX XX"
                            >
                        </div>

                        <div class="form-group">
                            <label for="editEmployeeEmail">Email</label>
                            <input 
                                type="email" 
                                id="editEmployeeEmail" 
                                name="email" 
                                placeholder="email@example.com"
                            >
                        </div>
                    </div>

                    <div class="work-schedule-section-compact">
                        <div class="work-schedule-header-compact">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"></circle>
                                <polyline points="12 6 12 12 16 14"></polyline>
                            </svg>
                            <h4>Ish Jadvali</h4>
                        </div>
                        <div id="workScheduleContainer" class="work-schedule-grid-compact">
                            <!-- Work schedule items will be loaded here -->
                        </div>
                        <div id="loadingWorkSchedule" class="loading-message-compact" style="display: none;">
                            Ish jadvali yuklanmoqda...
                        </div>
                    </div>
                    
                    <div id="editEmployeeErrorMessage" class="error-message" style="display: none;"></div>
                    <div id="editEmployeeSuccessMessage" class="success-message" style="display: none;"></div>
                    
                    <div class="modal-actions-compact">
                        <button type="button" class="btn-cancel" id="cancelEditEmployeeBtn">Bekor qilish</button>
                        <button type="submit" class="btn-save" id="saveEditEmployeeBtn">
                            <span class="btn-text">Saqlash</span>
                            <span class="btn-loader" id="editEmployeeLoader" style="display: none;"></span>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Delete employee modal -->
    <div id="deleteEmployeeModal" class="modal" style="display: none;">
        <div class="modal-content">
            <h3>Hodimni o'chirish</h3>
            <p>Haqiqatan ham <strong id="deleteEmployeeName"></strong> ni o'chirmoqchimisiz?</p>
            <div class="modal-actions">
                <button class="btn-cancel" id="cancelDeleteEmployeeBtn">Bekor qilish</button>
                <button class="btn-delete" id="confirmDeleteEmployeeBtn">O'chirish</button>
            </div>
        </div>
    </div>

    <!-- Employee Attendance Details Modal -->
    <!-- Employee Attendance Details Modal -->
    <div id="employeeAttendanceDetailsModal" class="modal" style="display: none;">
        <div class="modal-content employee-attendance-modal">
            <!-- Header -->
            <div class="employee-attendance-modal-header">
                <div>
                    <h3 id="employeeAttendanceDetailsTitle">Davomat Tafsilotlari</h3>
                    <div id="employeeAttendanceDetailsDate" class="employee-attendance-date"></div>
                </div>
                <button id="closeEmployeeAttendanceDetailsBtn" class="modal-close-btn">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
            </div>
            
            <!-- Filter Buttons -->
            <div class="employee-attendance-filters">
                <button id="filterTodayBtn" class="attendance-filter-btn active">Kunlik</button>
                <button id="filterMonthlyBtn" class="attendance-filter-btn">Oylik</button>
                <button id="filterYearlyBtn" class="attendance-filter-btn">Yillik</button>
                <button id="filterAllBtn" class="attendance-filter-btn">Hammasi</button>
            </div>
            
            <!-- Content -->
            <div class="employee-attendance-content">
                <div id="loadingEmployeeAttendanceDetails" class="loading-message" style="display: none;">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="animation: spin 1s linear infinite;">
                        <path d="M21 12a9 9 0 1 1-6.219-8.56"/>
                    </svg>
                    <span>Yuklanmoqda...</span>
                </div>
                
                <div id="employeeAttendanceDetailsList" class="attendance-details-list">
                    <!-- Attendance events will be loaded here -->
                </div>
                
                <div id="emptyEmployeeAttendanceDetails" class="empty-message" style="display: none;">
                    <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                        <circle cx="12" cy="12" r="10"></circle>
                        <line x1="12" y1="8" x2="12" y2="12"></line>
                        <line x1="12" y1="16" x2="12.01" y2="16"></line>
                    </svg>
                    <span>Keldi-ketdi yozuvlari topilmadi</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Delete confirmation modal -->
    <div id="deleteModal" class="modal" style="display: none;">
        <div class="modal-content">
            <h3>Adminni o'chirish</h3>
            <p>Haqiqatan ham <strong id="deleteUsername"></strong> ni o'chirmoqchimisiz?</p>
            <div class="modal-actions">
                <button class="btn-cancel" id="cancelDeleteBtn">Bekor qilish</button>
                <button class="btn-delete" id="confirmDeleteBtn">O'chirish</button>
            </div>
        </div>
    </div>

    <!-- Edit salary modal -->
    <div id="editSalaryModal" class="modal" style="display: none;">
        <div class="modal-content">
            <h3>Maoshni tahrirlash</h3>
            <form id="editSalaryForm" class="edit-form">
                <div class="form-group">
                    <label for="editSalaryEmployee">Hodim</label>
                    <select 
                        id="editSalaryEmployee" 
                        name="employee_id"
                        required
                    >
                        <option value="">Hodimni tanlang</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="editSalaryAmount">Summa</label>
                    <input 
                        type="text" 
                        inputmode="decimal"
                        id="editSalaryAmount" 
                        name="amount" 
                        placeholder="Summa kiriting"
                        required
                        autocomplete="off"
                    >
                </div>
                
                <div class="form-group">
                    <label for="editSalaryPeriodType">Davr Turi</label>
                    <select 
                        id="editSalaryPeriodType" 
                        name="period_type"
                        required
                    >
                        <option value="">Tanlang</option>
                        <option value="daily">Kunlik</option>
                        <option value="weekly">Haftalik</option>
                        <option value="monthly">Oylik</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="editSalaryPeriodDate">Sana</label>
                    <input 
                        type="date" 
                        id="editSalaryPeriodDate" 
                        name="period_date" 
                        required
                    >
                </div>
                
                <div class="form-group">
                    <label for="editSalaryWorkPosition">Ishlagan Lavozimi (ixtiyoriy)</label>
                    <select 
                        id="editSalaryWorkPosition" 
                        name="work_position"
                    >
                        <option value="">O'z lavozimida (asosiy lavozim)</option>
                    </select>
                    <small class="form-hint">Agar boshqa lavozimda ishlagan bo'lsa, tanlang</small>
                </div>
                
                <div class="form-group">
                    <label for="editSalaryNotes">Izoh (ixtiyoriy)</label>
                    <input 
                        type="text" 
                        id="editSalaryNotes" 
                        name="notes" 
                        placeholder="Izoh kiriting"
                        autocomplete="off"
                    >
                </div>
                
                <div id="editSalaryErrorMessage" class="error-message" style="display: none;"></div>
                <div id="editSalarySuccessMessage" class="success-message" style="display: none;"></div>
                
                <div class="modal-actions">
                    <button type="button" class="btn-cancel" id="cancelEditSalaryBtn">Bekor qilish</button>
                    <button type="submit" class="btn-save" id="saveEditSalaryBtn">
                        <span class="btn-text">Saqlash</span>
                        <span class="btn-loader" id="editSalaryLoader" style="display: none;"></span>
                    </button>
                </div>
            </form>
        </div>
    </div>


    <!-- Add/Edit Bonus Modal -->
    <div id="bonusModal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 420px; padding: 20px;">
            <h3 id="bonusModalTitle" style="font-size: 18px; margin-bottom: 16px; font-weight: 600;">Yangi Bonus Qo'shish</h3>
            <form id="bonusForm" class="edit-form" style="gap: 12px;">
                <div class="form-group" style="margin-bottom: 12px;">
                    <label for="bonusEmployee" style="font-size: 13px; margin-bottom: 6px;">Hodim</label>
                    <select id="bonusEmployee" name="employee_id" required style="padding: 8px 12px; font-size: 14px;">
                        <option value="">Hodimni tanlang</option>
                    </select>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                    <div class="form-group" style="margin-bottom: 12px;">
                        <label for="bonusAmount" style="font-size: 13px; margin-bottom: 6px;">Summa</label>
                        <input type="text" inputmode="decimal" id="bonusAmount" name="amount" placeholder="Summa" required style="padding: 8px 12px; font-size: 14px;">
                    </div>
                    
                    <div class="form-group" style="margin-bottom: 12px;">
                        <label for="bonusDate" style="font-size: 13px; margin-bottom: 6px;">Sana</label>
                        <input type="date" id="bonusDate" name="bonus_date" required style="padding: 8px 12px; font-size: 14px;">
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                    <div class="form-group" style="margin-bottom: 12px;">
                        <label for="bonusPeriodType" style="font-size: 13px; margin-bottom: 6px;">Davr</label>
                        <select id="bonusPeriodType" name="period_type" required style="padding: 8px 12px; font-size: 14px;">
                            <option value="">Tanlang</option>
                            <option value="daily">Kunlik</option>
                            <option value="weekly">Haftalik</option>
                            <option value="monthly">Oylik</option>
                        </select>
                    </div>
                    
                    <div class="form-group" style="margin-bottom: 12px;">
                        <label for="bonusPeriodDate" style="font-size: 13px; margin-bottom: 6px;">Davr Sanasi</label>
                        <input type="date" id="bonusPeriodDate" name="period_date" required style="padding: 8px 12px; font-size: 14px;">
                    </div>
                </div>
                
                <div class="form-group" style="margin-bottom: 12px;">
                    <label for="bonusReason" style="font-size: 13px; margin-bottom: 6px;">Sabab (ixtiyoriy)</label>
                    <textarea id="bonusReason" name="reason" rows="2" placeholder="Sabab..." style="padding: 8px 12px; font-size: 14px; resize: vertical;"></textarea>
                </div>
                
                <div id="bonusErrorMessage" class="error-message" style="display: none; font-size: 12px; padding: 8px; margin-bottom: 8px;"></div>
                <div id="bonusSuccessMessage" class="success-message" style="display: none; font-size: 12px; padding: 8px; margin-bottom: 8px;"></div>
                
                <div class="modal-actions" style="margin-top: 8px; gap: 8px;">
                    <button type="button" class="btn-cancel" id="cancelBonusBtn" style="padding: 8px 16px; font-size: 13px;">Bekor</button>
                    <button type="submit" class="btn-save" id="saveBonusBtn" style="padding: 8px 16px; font-size: 13px;">
                        <span class="btn-text">Saqlash</span>
                        <span class="btn-loader" id="bonusLoader" style="display: none;"></span>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add/Edit Penalty Modal -->
    <div id="penaltyModal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 420px; padding: 20px;">
            <h3 id="penaltyModalTitle" style="font-size: 18px; margin-bottom: 16px; font-weight: 600;">Yangi Jarima Qo'shish</h3>
            <form id="penaltyForm" class="edit-form" style="gap: 12px;">
                <div class="form-group" style="margin-bottom: 12px;">
                    <label for="penaltyEmployee" style="font-size: 13px; margin-bottom: 6px;">Hodim</label>
                    <select id="penaltyEmployee" name="employee_id" required style="padding: 8px 12px; font-size: 14px;">
                        <option value="">Hodimni tanlang</option>
                    </select>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                    <div class="form-group" style="margin-bottom: 12px;">
                        <label for="penaltyAmount" style="font-size: 13px; margin-bottom: 6px;">Summa</label>
                        <input type="text" inputmode="decimal" id="penaltyAmount" name="amount" placeholder="Summa" required style="padding: 8px 12px; font-size: 14px;">
                    </div>
                    
                    <div class="form-group" style="margin-bottom: 12px;">
                        <label for="penaltyDate" style="font-size: 13px; margin-bottom: 6px;">Sana</label>
                        <input type="date" id="penaltyDate" name="penalty_date" required style="padding: 8px 12px; font-size: 14px;">
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                    <div class="form-group" style="margin-bottom: 12px;">
                        <label for="penaltyPeriodType" style="font-size: 13px; margin-bottom: 6px;">Davr</label>
                        <select id="penaltyPeriodType" name="period_type" required style="padding: 8px 12px; font-size: 14px;">
                            <option value="">Tanlang</option>
                            <option value="daily">Kunlik</option>
                            <option value="weekly">Haftalik</option>
                            <option value="monthly">Oylik</option>
                        </select>
                    </div>
                    
                    <div class="form-group" style="margin-bottom: 12px;">
                        <label for="penaltyPeriodDate" style="font-size: 13px; margin-bottom: 6px;">Davr Sanasi</label>
                        <input type="date" id="penaltyPeriodDate" name="period_date" required style="padding: 8px 12px; font-size: 14px;">
                    </div>
                </div>
                
                <div class="form-group" style="margin-bottom: 12px;">
                    <label for="penaltyReason" style="font-size: 13px; margin-bottom: 6px;">Sabab (ixtiyoriy)</label>
                    <textarea id="penaltyReason" name="reason" rows="2" placeholder="Sabab..." style="padding: 8px 12px; font-size: 14px; resize: vertical;"></textarea>
                </div>
                
                <div id="penaltyErrorMessage" class="error-message" style="display: none; font-size: 12px; padding: 8px; margin-bottom: 8px;"></div>
                <div id="penaltySuccessMessage" class="success-message" style="display: none; font-size: 12px; padding: 8px; margin-bottom: 8px;"></div>
                
                <div class="modal-actions" style="margin-top: 8px; gap: 8px;">
                    <button type="button" class="btn-cancel" id="cancelPenaltyBtn" style="padding: 8px 16px; font-size: 13px;">Bekor</button>
                    <button type="submit" class="btn-save" id="savePenaltyBtn" style="padding: 8px 16px; font-size: 13px;">
                        <span class="btn-text">Saqlash</span>
                        <span class="btn-loader" id="penaltyLoader" style="display: none;"></span>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Penalty Details Modal (Kechikishlar tafsilotlari) -->
    <div id="penaltyDetailsModal" class="modal" style="display: none;" onclick="if(event.target === this) closePenaltyDetailsModal()">
        <div class="modal-content" style="max-width: 500px; padding: 20px; max-height: 80vh; overflow-y: auto;" onclick="event.stopPropagation()">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                <h3 id="penaltyDetailsTitle" style="font-size: 18px; font-weight: 600; margin: 0;">Kechikishlar tafsilotlari</h3>
                <button onclick="closePenaltyDetailsModal()" style="background: none; border: none; font-size: 24px; cursor: pointer; color: #6b7280; padding: 0; width: 28px; height: 28px; display: flex; align-items: center; justify-content: center; border-radius: 4px; transition: all 0.2s;" onmouseover="this.style.background='#f3f4f6'" onmouseout="this.style.background='none'">Ã—</button>
            </div>
            <div id="penaltyDetailsContent"></div>
        </div>
    </div>

    <!-- Bonus Details Modal (Bonuslar tafsilotlari) -->
    <div id="bonusDetailsModal" class="modal" style="display: none;" onclick="if(event.target === this) closeBonusDetailsModal()">
        <div class="modal-content" style="max-width: 500px; padding: 20px; max-height: 80vh; overflow-y: auto;" onclick="event.stopPropagation()">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                <h3 id="bonusDetailsTitle" style="font-size: 18px; font-weight: 600; margin: 0;">Bonuslar tafsilotlari</h3>
                <button onclick="closeBonusDetailsModal()" style="background: none; border: none; font-size: 24px; cursor: pointer; color: #6b7280; padding: 0; width: 28px; height: 28px; display: flex; align-items: center; justify-content: center; border-radius: 4px; transition: all 0.2s;" onmouseover="this.style.background='#f3f4f6'" onmouseout="this.style.background='none'">Ã—</button>
            </div>
            <div id="bonusDetailsContent"></div>
        </div>
    </div>

    <script src="utils.js"></script>
    <script src="admin-script.js"></script>
</body>
</html>

